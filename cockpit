#!/bin/bash
# Cockpit + Virtualization Installer Script (Ubuntu/Debian)

set -e

echo "ğŸš€ Updating system..."
sudo apt update && sudo apt upgrade -y

echo "ğŸ“¦ Installing Cockpit..."
sudo apt install -y cockpit
sudo systemctl enable --now cockpit.socket

echo "ğŸ“¦ Installing Virtualization packages..."
sudo apt install -y qemu-kvm libvirt-daemon-system libvirt-clients bridge-utils virt-manager
sudo systemctl enable --now libvirtd

echo "ğŸ“¦ Adding Cockpit Virtual Machines plugin..."
sudo apt install -y cockpit-machines

echo "ğŸ‘¤ Adding current user to virtualization groups..."
sudo usermod -aG libvirt,kvm $USER

echo "âœ… Installation complete!"
echo "ğŸ‘‰ Access Cockpit at: https://your-server-ip:9090"
echo "âš ï¸ Please log out and log back in (or reboot) to apply user group changes."
